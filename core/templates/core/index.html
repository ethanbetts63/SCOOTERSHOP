{% extends "core/layout.html" %}
{% load static %}

{% block title %}Scootershop Australia{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/index_styles.css' %}">
<link rel="stylesheet" href="{% static 'core/css/map_styles.css' %}">
<link rel="stylesheet" href="{% static 'core/css/review_styles.css' %}">
<link rel="stylesheet" href="{% static 'core/css/featured_styles.css' %}">
<link rel="stylesheet" href="{% static 'core/css/book_include_styles.css' %}">
<style>
    .image-cycler-box {
        position: relative;
        background-size: cover;
        background-position: center;
        transition: background-image 1s ease-in-out;
        min-height: 250px; 
    }
    .image-cycler-box::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 0.5rem; /* Matches rounded-lg */
    }
    .image-cycler-content {
        position: relative;
        z-index: 10;
    }
</style>
{% endblock %}

{% block content %}
    <div class="container mx-auto px-4 mt-8">
        <div class="flex flex-wrap -mx-4">
            <div class="w-full lg:w-1/2 px-4 mb-8 lg:mb-0">
                {% include 'service/step1_service_details_include.html' %}
            </div>

            <div class="w-full lg:w-1/2 px-4">
                <div class="flex flex-col h-full justify-around">
                    
                    <div id="new-bikes-box" class="image-cycler-box rounded-lg p-8 text-center shadow-md hover:shadow-xl transition-shadow duration-300 ease-in-out mb-4 flex items-center justify-center">
                        <div class="image-cycler-content">
                            <h2 class="text-3xl font-bold mb-3 text-white">New Bikes</h2>
                            <p class="mb-5 text-gray-200">Explore our latest models from the world's leading brands.</p>
                            <a href="{% url 'inventory:new' %}" class="inline-block bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors duration-300">
                                View New Bikes
                            </a>
                        </div>
                    </div>

                    <div id="used-bikes-box" class="image-cycler-box rounded-lg p-8 text-center shadow-md hover:shadow-xl transition-shadow duration-300 ease-in-out mt-4 flex items-center justify-center">
                         <div class="image-cycler-content">
                            <h2 class="text-3xl font-bold mb-3 text-white">Used Bikes</h2>
                            <p class="mb-5 text-gray-200">Discover high-quality, pre-owned scooters at fantastic prices.</p>
                            <a href="{% url 'inventory:used' %}" class="inline-block bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors duration-300">
                                View Used Bikes
                            </a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    {% include "core/includes/reviews.html" %}

    {% if featured_new_items %}
        <div class="container mx-auto my-5 py-5">
            {% include 'inventory/_featured_include.html' with featured_items=featured_new_items section_title="Featured New Motorcycles" category="new" %}
        </div>
    {% endif %}

    {% if featured_used_items %}
        <div class="container mx-auto my-5 py-5">
            {% include 'inventory/_featured_include.html' with featured_items=featured_used_items section_title="Featured Used Motorcycles" category="used" %}
        </div>
    {% endif %}

    <!-- ================================================================= -->
    <!-- ========= START: New "Our Brands" Section ======================= -->
    <!-- ================================================================= -->
    <div class="container mx-auto px-4 py-16">
        <div class="space-y-16">
            <!-- Text color changed to white -->
            <h2 class="text-3xl md:text-4xl font-bold text-white text-center">Our Trusted Brands</h2>

            <!-- SYM Brand Section (Text on Left, Image on Right) -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16 items-center">
                <div class="flex flex-col justify-center">
                    <!-- Text colors changed to white and light gray -->
                    <h3 class="text-2xl font-bold text-white mb-2">SYM Scooters</h3>
                    <p class="font-semibold text-gray-300 mb-4">Reliable, Affordable, and Built to Last</p>
                    <p class="text-gray-300 mb-4">
                        Founded in 1954, SYM is a trusted Taiwanese manufacturer known for exceptional build quality and reliability. They strike the perfect balance—offering better quality than many low-end brands, without the high price tag of premium models.
                    </p>
                    <p class="text-gray-300 mb-6">
                        We've proudly partnered with them for years—mainly because it just makes sense. Their scooters come back with fewer issues, and our mechanics enjoy working on them.
                    </p>
                    <a href="{% url 'inventory:new' %}" class="inline-block w-full sm:w-auto bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 transition-colors duration-300 text-center">
                        View New Models
                    </a>
                </div>
                <div class="w-full h-64 lg:h-full rounded-2xl overflow-hidden shadow-lg">
                    <img src="https://placehold.co/800x600/e0e0e0/333?text=SYM+Scooter" alt="SYM Scooter" class="w-full h-full object-cover">
                </div>
            </div>

            <!-- Segway Brand Section (Image on Left, Text on Right) -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16 items-center">
                <div class="w-full h-64 lg:h-full rounded-2xl overflow-hidden shadow-lg lg:order-first">
                     <img src="https://placehold.co/800x600/333/e0e0e0?text=Segway+Moped" alt="Segway Moped" class="w-full h-full object-cover">
                </div>
                <div class="flex flex-col justify-center">
                    <!-- Text colors changed to white and light gray -->
                    <h3 class="text-2xl font-bold text-white mb-2">Segway Electric Mopeds</h3>
                    <p class="font-semibold text-gray-300 mb-4">Innovation Meets Reliability</p>
                    <p class="text-gray-300 mb-4">
                        Best known for their self-balancing transporters, Segway has evolved into a serious player in the electric moped space. As the market changes, Segway stands out with the experience and quality that comes from being an early innovator.
                    </p>
                    <p class="text-gray-300 mb-6">
                        We've tested a lot of brands, but Segway's electric mopeds impressed us with their build quality, design, and performance. We're confident these are vehicles we can stand behind—and that you'll love riding.
                    </p>
                    <a href="{% url 'inventory:new' %}" class="inline-block w-full sm:w-auto bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 transition-colors duration-300 text-center">
                        View New Models
                    </a>
                </div>
            </div>

        </div>
    </div>
    <!-- ================================================================= -->
    <!-- ========= END: New "Our Brands" Section ========================= -->
    <!-- ================================================================= -->
{% endblock %}

{% block map %}
    <div class="container mx-auto px-4 my-8">
        <h2 class="text-3xl font-bold tracking-tight text-white text-center mb-8">Where To Find Us</h2>
        {% include "core/includes/map.html" %}
    </div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const newBikeImages = [];
    "{% for item in featured_new_items %}"
        "{% if item.motorcycle.image %}"
            newBikeImages.push("{{ item.motorcycle.image.url }}");
        "{% endif %}"
    "{% endfor %}"

    const usedBikeImages = [];
    "{% for item in featured_used_items %}"
        "{% if item.motorcycle.image %}"
            usedBikeImages.push("{{ item.motorcycle.image.url }}");
        "{% endif %}"
    "{% endfor %}"

    function createImageCycler(elementId, images) {
        const box = document.getElementById(elementId);
        if (!box || images.length === 0) {
            if (box) {
                box.style.backgroundImage = "url('{% static 'images/default_scooter_bg.jpg' %}')";
            }
            return;
        }

        let currentIndex = 0;
        box.style.backgroundImage = `url('${images[currentIndex]}')`;

        setInterval(() => {
            currentIndex = (currentIndex + 1) % images.length;
            box.style.backgroundImage = `url('${images[currentIndex]}')`;
        }, 7000);
    }

    createImageCycler('new-bikes-box', newBikeImages);
    createImageCycler('used-bikes-box', usedBikeImages);
});
</script>
{% endblock %}
