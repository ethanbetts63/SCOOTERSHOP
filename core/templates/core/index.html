{% extends "core/layout.html" %}
{% load static %}

{% block title %}Scootershop Australia{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/index_styles.css' %}">
<link rel="stylesheet" href="{% static 'core/css/map_styles.css' %}">
<link rel="stylesheet" href="{% static 'core/css/review_styles.css' %}">
<link rel="stylesheet" href="{% static 'core/css/featured_styles.css' %}">
<link rel="stylesheet" href="{% static 'core/css/book_include_styles.css' %}">
<style>
    .image-cycler-box {
        position: relative;
        background-size: cover;
        background-position: center;
        transition: background-image 1s ease-in-out;
        min-height: 250px; 
    }
    .image-cycler-box::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 0.5rem; /* Matches rounded-lg */
    }
    .image-cycler-content {
        position: relative;
        z-index: 10;
    }
</style>
{% endblock %}

{% block content %}
    <div class="container mx-auto px-4 mt-8">
        <div class="flex flex-wrap -mx-4">
            <div class="w-full lg:w-1/2 px-4 mb-8 lg:mb-0">
                {% include 'service/step1_service_details_include.html' %}
            </div>

            <div class="w-full lg:w-1/2 px-4">
                <div class="flex flex-col h-full justify-around">
                    
                    <div id="new-bikes-box" class="image-cycler-box rounded-lg p-8 text-center shadow-md hover:shadow-xl transition-shadow duration-300 ease-in-out mb-4 flex items-center justify-center">
                        <div class="image-cycler-content">
                            <h2 class="text-3xl font-bold mb-3 text-white">New Bikes</h2>
                            <p class="mb-5 text-gray-200">Explore our latest models from the world's leading brands.</p>
                            <a href="{% url 'inventory:new' %}" class="inline-block bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors duration-300">
                                View New Bikes
                            </a>
                        </div>
                    </div>

                    <div id="used-bikes-box" class="image-cycler-box rounded-lg p-8 text-center shadow-md hover:shadow-xl transition-shadow duration-300 ease-in-out mt-4 flex items-center justify-center">
                         <div class="image-cycler-content">
                            <h2 class="text-3xl font-bold mb-3 text-white">Used Bikes</h2>
                            <p class="mb-5 text-gray-200">Discover high-quality, pre-owned scooters at fantastic prices.</p>
                            <a href="{% url 'inventory:used' %}" class="inline-block bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors duration-300">
                                View Used Bikes
                            </a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    {% include "core/includes/reviews.html" %}

    {% if featured_new_items %}
        <div class="container my-5 py-5">
            {% include 'inventory/_featured_include.html' with featured_items=featured_new_items section_title="Featured New Motorcycles" category="new" %}
        </div>
    {% endif %}

    {% if featured_used_items %}
        <div class="container my-5 py-5 border-t">
            {% include 'inventory/_featured_include.html' with featured_items=featured_used_items section_title="Featured Used Motorcycles" category="used" %}
        </div>
    {% endif %}

    <div class="container">
        <h1 class="section-title">About</h1>
        <div class="about-container">
            <div class="card has-bg-effect brand-card about-brand">
                <div class="card-body">
                    <h3>Scooter Shop Australia</h3>
                    <p>A family-run business based in Fremantle for over 15 years and Perth's only scooter-exclusive showroom.</p>
                    <p>We stock new SYM and Segway scooters, plus a rotating selection of second-hand models. Our factory-trained mechanic offers expert servicing with quality parts and accessories on hand.</p>
                    <p>We also carry genuine Vespa, Piaggio, and Aprilia accessories, along with helmets and maintenance gear.</p>
                    <p>Drop by for friendly advice, test rides, and all your scooter needs.</p>
                </div>
            </div>

            <div class="card has-bg-effect brand-card contact-brand">
                <div class="card-body">
                    <h3>Contact Us</h3>
                    <div class="contact-info">
                        {% if settings.phone_number %}
                            <div class="contact-item">
                                <span class="svg-icon svg-icon-md icon-phone"></span>
                                <span><strong>Phone:</strong> {{ settings.phone_number }}</span>
                            </div>
                        {% endif %}
                        {% if settings.email_address %}
                            <div class="contact-item">
                                <span class="svg-icon svg-icon-md icon-mail"></span>
                                <span><strong>Email:</strong> {{ settings.email_address }}</span>
                            </div>
                        {% endif %}
                        {% if settings.storefront_address %}
                            <div class="contact-item">
                                <span class="svg-icon svg-icon-md icon-pin"></span>
                                <span><strong>Address:</strong> {{ settings.storefront_address|linebreaksbr }}</span>
                            </div>
                        {% endif %}
                        <div class="contact-item hours">
                            <span class="svg-icon svg-icon-md icon-clock"></span>
                            <div>
                                <strong>Hours:</strong>
                                <ul class="reset-list hours-list">
                                    {% if settings.opening_hours_monday %}
                                        <li>Monday: {{ settings.opening_hours_monday }}</li>
                                    {% endif %}
                                    {% if settings.opening_hours_tuesday %}
                                        <li>Tuesday: {{ settings.opening_hours_tuesday }}</li>
                                    {% endif %}
                                    {% if settings.opening_hours_wednesday %}
                                        <li>Wednesday: {{ settings.opening_hours_wednesday }}</li>
                                    {% endif %}
                                    {% if settings.opening_hours_thursday %}
                                        <li>Thursday: {{ settings.opening_hours_thursday }}</li>
                                    {% endif %}
                                    {% if settings.opening_hours_friday %}
                                        <li>Friday: {{ settings.opening_hours_friday }}</li>
                                    {% endif %}
                                    {% if settings.opening_hours_saturday %}
                                        <li>Saturday: {{ settings.opening_hours_saturday }}</li>
                                    {% endif %}
                                    {% if settings.opening_hours_sunday %}
                                        <li>Sunday: {{ settings.opening_hours_sunday }}</li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <h2 class="section-title">Our Brands</h2>
        <div class="brand-cards-container">
            <div class="card has-bg-effect brand-card sym-brand">
                <div class="card-body">
                    <h3>SYM Scooters – Reliable, Affordable, and Built to Last</h3>
                    <p>Founded in 1954, SYM is a trusted Taiwanese motorcycle manufacturer known for exceptional build quality, reliability, and generous warranty coverage. They strike the perfect balance—offering better quality than many low-end Chinese brands, without the high price tag of Japanese or premium European models.</p>
                    <p>SYM has a strong reputation across Europe, Southeast Asia, and South America. We've proudly partnered with them for years—mainly because it just makes sense. Their scooters come back with fewer issues, and our mechanics enjoy working on them.</p>
                </div>
            </div>
            <div class="card has-bg-effect brand-card segway-brand">
                <div class="card-body">
                    <h3>Segway Electric Mopeds – Innovation Meets Reliability</h3>
                    <p>Best known for their self-balancing transporters, Segway has evolved into a serious player in the electric moped space. As the market continues to grow and change rapidly, Segway stands out with the experience and quality that comes from being an early innovator.</p>
                    <p>We've tested a lot of brands, but Segway's electric mopeds impressed us with their build quality, design, and performance. After a long search, we're confident these are vehicles we can stand behind—and that you'll love riding.</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block map %}
    <div class="container">
        <h2 class="section-title map-title">Where to find us:</h2>
        {% include "core/includes/map.html" %}
    </div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const newBikeImages = [];
    "{% for item in featured_new_items %}"
        "{% if item.motorcycle.image %}"
            newBikeImages.push("{{ item.motorcycle.image.url }}");
        "{% endif %}"
    "{% endfor %}"

    const usedBikeImages = [];
    "{% for item in featured_used_items %}"
        "{% if item.motorcycle.image %}"
            usedBikeImages.push("{{ item.motorcycle.image.url }}");
        "{% endif %}"
    "{% endfor %}"

    function createImageCycler(elementId, images) {
        const box = document.getElementById(elementId);
        if (!box || images.length === 0) {
            if (box) {
                box.style.backgroundImage = "url('{% static 'images/default_scooter_bg.jpg' %}')";
            }
            return;
        }

        let currentIndex = 0;
        box.style.backgroundImage = `url('${images[currentIndex]}')`;

        setInterval(() => {
            currentIndex = (currentIndex + 1) % images.length;
            box.style.backgroundImage = `url('${images[currentIndex]}')`;
        }, 7000);
    }

    createImageCycler('new-bikes-box', newBikeImages);
    createImageCycler('used-bikes-box', usedBikeImages);
});
</script>
{% endblock %}
