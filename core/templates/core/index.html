{% extends "core/layout.html" %}
{% load static %}

{% block title %}Allbikes and Vespa Warehouse - Perth's Premier Scooter Shop{% endblock %}
{% block meta_description %}Welcome to Allbikes and Vespa Warehouse, Perth's leading scooter shop. We offer a wide range of new and used scooters, servicing, and parts. Visit us for top brands like Vespa, SYM, and Segway.{% endblock %}
{% block meta_keywords %}scooter shop perth, vespa perth, sym scooters, segway mopeds, scooter service perth, used scooters perth{% endblock %}

{% block extra_css %}
<style>
    .image-cycler-box {
        position: relative;
        background-size: cover;
        background-position: center;
        transition: background-image 1s ease-in-out;
    }
</style>
{% endblock %}

{% block content %}
    <div class="container mx-auto px-4 mt-2">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="w-full">
                {% include 'service/step1_service_details_include.html' %}
            </div>

            <div class="w-full space-y-8 lg:flex lg:flex-col lg:justify-center">
                <div id="new-bikes-box" class="image-cycler-box rounded-lg shadow-lg hover:shadow-2xl transition-shadow duration-300 ease-in-out flex items-center justify-center p-8 min-h-[250px]">
                    <div class="absolute inset-0 bg-black bg-opacity-50 rounded-lg"></div>
                    <div class="relative z-10 text-center">
                        <h2 class="text-3xl font-bold text-white">New Bikes</h2>
                        <p class="my-3 text-gray-200">Explore our latest models from the world's leading brands.</p>
                        <a href="{% url 'inventory:new' %}" class="inline-block bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors duration-300">
                            View New Bikes
                        </a>
                    </div>
                </div>

                <div id="used-bikes-box" class="image-cycler-box rounded-lg shadow-lg hover:shadow-2xl transition-shadow duration-300 ease-in-out flex items-center justify-center p-8 min-h-[250px]">
                    <div class="absolute inset-0 bg-black bg-opacity-50 rounded-lg"></div>
                    <div class="relative z-10 text-center">
                        <h2 class="text-3xl font-bold text-white">Used Bikes</h2>
                        <p class="my-3 text-gray-200">Discover high-quality, pre-owned scooters at fantastic prices.</p>
                        <a href="{% url 'inventory:used' %}" class="inline-block bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors duration-300">
                            View Used Bikes
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% if featured_new_items %}
        <div class="container mx-auto my-5 py-5">
            {% include 'inventory/_featured_include.html' with featured_items=featured_new_items section_title="Featured New Motorcycles" category="new" %}
        </div>
    {% endif %}

    {% if featured_used_items %}
        <div class="container mx-auto my-5 py-5">
            {% include 'inventory/_featured_include.html' with featured_items=featured_used_items section_title="Featured Used Motorcycles" category="used" %}
        </div>
    {% endif %}

    <div class="container mx-auto px-4 pt-8 pb-16">
        <div class="space-y-16">
            <h2 class="text-3xl md:text-4xl font-bold text-white text-center mb-2">Our Trusted Brands</h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16 items-center">
                <div class="flex flex-col justify-center">
                    <h3 class="text-2xl font-bold text-white mb-2">SYM Scooters</h3>
                    <p class="font-semibold text-gray-300 mb-4">Reliable, Affordable, and Built to Last</p>
                    <p class="text-gray-300 mb-4">
                        Founded in 1954, SYM is a trusted Taiwanese manufacturer known for exceptional build quality and reliability. They strike the perfect balance—offering better quality than many low-end brands, without the high price tag of premium models.
                    </p>
                    <p class="text-gray-300 mb-6">
                        We've proudly partnered with them for years—mainly because it just makes sense. Their scooters come back with fewer issues, and our mechanics enjoy working on them.
                    </p>
                    <a href="{% url 'inventory:new' %}" class="w-full sm:w-auto bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 transition-colors duration-300 text-center">
                        View SYM Models
                    </a>
                </div>
                <div class="w-full h-80 lg:h-full rounded-2xl overflow-hidden shadow-lg">
                    <img src="{% static 'images/sym_22.webp' %}" alt="SYM Scooter" class="w-full h-full object-cover">
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16 items-center">
                <div class="flex flex-col justify-center lg:order-2">
                    <h3 class="text-2xl font-bold text-white mb-2">Segway Electric Mopeds</h3>
                    <p class="font-semibold text-gray-300 mb-4">Innovation Meets Reliability</p>
                    <p class="text-gray-300 mb-4">
                        Best known for their self-balancing transporters, Segway has evolved into a serious player in the electric moped space. As the market changes, Segway stands out with the experience and quality that comes from being an early innovator.
                    </p>
                    <p class="text-gray-300 mb-6">
                        We've tested a lot of brands, but Segway's electric mopeds impressed us with their build quality, design, and performance. We're confident these are vehicles we can stand behind—and that you'll love riding.
                    </p>
                    <a href="{% url 'inventory:new' %}" class="w-full sm:w-auto bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 transition-colors duration-300 text-center">
                        View Segway Models
                    </a>
                </div>
                <div class="w-full h-80 lg:h-full rounded-2xl overflow-hidden shadow-lg lg:order-1">
                     <img src="{% static 'images/segway_1.webp' %}" alt="Segway Moped" class="w-full h-full object-cover">
                </div>
            </div>

        </div>
    </div>
{% if settings.enable_motorcycle_mover %}
{% include 'core/includes/motorcycle_mover.html' %}
{% endif %}

{% endblock %}

{% block map %}
    <div class="container mx-auto px-4 my-8">
        <h2 class="text-3xl font-bold tracking-tight text-white text-center mb-8">Where To Find Us (By Appointment)</h2>
        {% include "core/includes/map.html" %}
    </div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const newBikeImages = [];
    "{% for item in featured_new_items %}"
        "{% if item.motorcycle.image %}"
            newBikeImages.push("{{ item.motorcycle.image.url }}");
        "{% endif %}"
    "{% endfor %}"

    const usedBikeImages = [];
    "{% for item in featured_used_items %}"
        "{% if item.motorcycle.image %}"
            usedBikeImages.push("{{ item.motorcycle.image.url }}");
        "{% endif %}"
    "{% endfor %}"

    function createImageCycler(elementId, images) {
        const box = document.getElementById(elementId);
        if (!box || images.length === 0) {
            if (box) {
                box.style.backgroundColor = "#1F2937"; // Equivalent to Tailwind's bg-gray-900
            }
            return;
        }

        let currentIndex = 0;
        box.style.backgroundImage = `url('${images[currentIndex]}')`;

        setInterval(() => {
            currentIndex = (currentIndex + 1) % images.length;
            box.style.backgroundImage = `url('${images[currentIndex]}')`;
        }, 7000);
    }

    createImageCycler('new-bikes-box', newBikeImages);
    createImageCycler('used-bikes-box', usedBikeImages);
});
</script>
{% endblock %}
