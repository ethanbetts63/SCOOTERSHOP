{% load static %}

<div class="container book-service-container">
    <div class="card has-bg-effect service-booking-card">
        <div class="card-body">
            <h2 class="section-title booking-title">Find Your Hire Motorcycle</h2>

            <form method="get" action="{% url 'inventory:hire' %}" class="booking-form-container hire-booking-form">
                {% csrf_token %}

                <div class="date-time-rows-group">
                    <div class="date-time-row">
                        <div class="form-field">
                            <label for="pick_up_date">Pick Up Date</label>
                            <input type="text" id="pick_up_date" name="pick_up_date"
                                   class="form-control"
                                   placeholder="Select pick up date">
                        </div>
                        <div class="form-field">
                            <label for="pick_up_time">Pick Up Time</label>
                             <input type="text" id="pick_up_time" name="pick_up_time"
                                    class="form-control"
                                   placeholder="Select pick up time">
                        </div>
                    </div>

                    <div class="date-time-row">
                        <div class="form-field">
                            <label for="return_date">Return Date</label>
                             <input type="text" id="return_date" name="return_date"
                                    class="form-control"
                                   placeholder="Select return date">
                        </div>
                         <div class="form-field">
                            <label for="return_time">Return Time</label>
                             <input type="text" id="return_time" name="return_time"
                                    class="form-control"
                                   placeholder="Select return time">
                        </div>
                    </div>

                    <div class="search-button-column">
                        <button type="submit" class="btn-primary book-now-btn">
                            Search
                        </button>
                    </div>
                </div>


                <div class="license-checkbox-container">
                    <input type="checkbox" id="has_motorcycle_license" name="has_motorcycle_license" value="true">
                    <label for="has_motorcycle_license" class="checkbox-label">I have a motorcycle license</label>
                    <span class="info-tooltip">
                        <span id="info_icon" class="svg-icon svg-icon-sm icon-info"></span>
                        <div id="license_info_box" class="info-box">
                            By Australian law, anyone with a car license can drive up to a 50cc scooter, but above that requires a motorcycle license.
                        </div>
                    </span>
                </div>

            </form>
        </div>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Flatpickr for date inputs
    flatpickr("#pick_up_date", {
        dateFormat: "Y-m-d", // Date format-MM-DD
        minDate: "today", // Prevent selecting past dates
        altInput: true, // Use a user-friendly input format
        altFormat: "F j, Y", // User-friendly date format
        // Add any disabled dates or other configurations here if needed
    });

    flatpickr("#return_date", {
        dateFormat: "Y-m-d", // Date format-MM-DD
        minDate: "today", // Prevent selecting past dates
        altInput: true, // Use a user-friendly input format
        altFormat: "F j, Y", // User-friendly date format
        // Add any disabled dates or other configurations here if needed
    });

    // Initialize Flatpickr for time inputs
    flatpickr("#pick_up_time", {
        enableTime: true, // Enable time picker
        noCalendar: true, // Disable date picker
        dateFormat: "H:i", // Time format HH:MM (24 hour)
        time_24hr: true, // Use 24 hour format
        // You might want to add minTime/maxTime based on business hours
    });

    flatpickr("#return_time", {
        enableTime: true, // Enable time picker
        noCalendar: true, // Disable date picker
        dateFormat: "H:i", // Time format HH:MM (24 hour)
        time_24hr: true, // Use 24 hour format
        // You might want to add minTime/maxTime based on business hours
    });

    // License Info Tooltip Logic
    const infoIcon = document.getElementById('info_icon');
    const licenseInfoBox = document.getElementById('license_info_box');

    if (infoIcon && licenseInfoBox) {
        // Show info box on hover
        infoIcon.addEventListener('mouseenter', function() {
            licenseInfoBox.classList.add('visible');
        });

        // Hide info box when mouse leaves icon or box
        infoIcon.addEventListener('mouseleave', function() {
             // Add a small delay before hiding in case the user moves to the box
             setTimeout(() => {
                if (!licenseInfoBox.matches(':hover')) {
                     licenseInfoBox.classList.remove('visible');
                }
             }, 100); // Adjust delay as needed
        });

        // Keep box visible if mouse enters the box itself
         licenseInfoBox.addEventListener('mouseleave', function() {
             licenseInfoBox.classList.remove('visible');
         });
    }
});
</script>