{% extends "dashboard/admin_layout.html" %}

{% block admin_main_content %}
<div>
    <h1>{{ page_title }}</h1>
    <hr>

    {% if messages %}
        <div>
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
    {% endif %}

    <form method="post" id="admin-booking-form">
        {% csrf_token %}


        <div>
            <div>
                <h3>Customer Selection</h3>
            </div>
            <div>

                <div>
                    <a href="#" id="add-customer-button">Add New Customer</a>

                </div>

                <div>
                    {{ form.customer_type.label_tag }}
                    {{ form.customer_type }}
                </div>

                <div>
                    <div>
                        {{ form.user.label_tag }}
                        {{ form.user }}
                        {% if form.user.errors %}
                            <div>
                                {% for error in form.user.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>


        <div>
            <div>
                <h3>Customer Details</h3>
            </div>
            <div>
                <p id="customer-details-instructions">Details will populate when an existing customer is selected, or can be entered for a one-off booking.</p>
                <div>
                    Error loading customer details. Please enter manually.
                </div>

                <div>
                    {{ form.one_off_first_name.label_tag }}
                    {{ form.one_off_first_name }}
                    {% if form.one_off_first_name.help_text %}
                        <small>{{ form.one_off_first_name.help_text }}</small>
                    {% endif %}
                    {% if form.one_off_first_name.errors %}
                        <div>
                            {% for error in form.one_off_first_name.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div>
                    {{ form.one_off_last_name.label_tag }}
                    {{ form.one_off_last_name }}
                    {% if form.one_off_last_name.help_text %}
                        <small>{{ form.one_off_last_name.help_text }}</small>
                    {% endif %}
                    {% if form.one_off_last_name.errors %}
                        <div>
                            {% for error in form.one_off_last_name.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div>
                    {{ form.one_off_email.label_tag }}
                    {{ form.one_off_email }}
                    {% if form.one_off_email.help_text %}
                        <small>{{ form.one_off_email.help_text }}</small>
                    {% endif %}
                    {% if form.one_off_email.errors %}
                        <div>
                            {% for error in form.one_off_email.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div>
                    {{ form.one_off_phone_number.label_tag }}
                    {{ form.one_off_phone_number }}
                    {% if form.one_off_phone_number.help_text %}
                        <small>{{ form.one_off_phone_number.help_text }}</small>
                    {% endif %}
                    {% if form.one_off_phone_number.errors %}
                        <div>
                            {% for error in form.one_off_phone_number.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>


        <div>
            <div>
                <h3>Motorcycle Details</h3>
            </div>
            <div>
                <div>
                    {{ form.bike_selection_type.label_tag }}
                    {{ form.bike_selection_type }}
                </div>

                <div>
                    <div>
                        {{ form.existing_motorcycle.label_tag }}
                        {{ form.existing_motorcycle }}
                        {% if form.existing_motorcycle.errors %}
                            <div>
                                {% for error in form.existing_motorcycle.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>

                <div>
                    <h4>New Motorcycle Details</h4>
                    <div>
                        {{ form.new_bike_make.label_tag }}
                        {{ form.new_bike_make }}
                        {% if form.new_bike_make.errors %}
                            <div>
                                {% for error in form.new_bike_make.errors %}
                                    {{ error }}
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    <div>
                        {{ form.new_bike_model.label_tag }}
                        {{ form.new_bike_model }}
                        {% if form.new_bike_model.errors %}
                            <div>
                                {% for error in form.new_bike_model.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div>
                        {{ form.new_bike_year.label_tag }}
                        {{ form.new_bike_year }}
                        {% if form.new_bike_year.errors %}
                            <div>
                                {% for error in form.new_bike_year.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div>
                        {{ form.new_bike_rego.label_tag }}
                        {{ form.new_bike_rego }}
                        {% if form.new_bike_rego.errors %}
                            <div>
                                {% for error in form.new_bike_rego.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div>
                        {{ form.new_bike_vin_number.label_tag }}
                        {{ form.new_bike_vin_number }}
                        {% if form.new_bike_vin_number.errors %}
                            <div>
                                {% for error in form.new_bike_vin_number.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div>
                        {{ form.new_bike_odometer.label_tag }}
                        {{ form.new_bike_odometer }}
                        {% if form.new_bike_odometer.errors %}
                            <div>
                                {% for error in form.new_bike_odometer.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div>
                        {{ form.new_bike_transmission.label_tag }}
                        {{ form.new_bike_transmission }}
                        {% if form.new_bike_transmission.errors %}
                            <div>
                                {% for error in form.new_bike_transmission.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>

                <div>
                    <h4>Vehicle Details (One-off)</h4>
                    <div>
                        {{ form.anon_vehicle_make.label_tag }}
                        {{ form.anon_vehicle_make }}
                        {% if form.anon_vehicle_make.errors %}
                            <div>
                                {% for error in form.anon_vehicle_make.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div>
                        {{ form.anon_vehicle_model.label_tag }}
                        {{ form.anon_vehicle_model }}
                        {% if form.anon_vehicle_model.errors %}
                            <div>
                                {% for error in form.anon_vehicle_model.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div>
                        {{ form.anon_vehicle_year.label_tag }}
                        {{ form.anon_vehicle_year }}
                        {% if form.anon_vehicle_year.errors %}
                            <div>
                                {% for error in form.anon_vehicle_year.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>


        <br>


        <div>
            <div>
                <h3>Service Details</h3>
            </div>
            <div>
                <div>
                    {{ form.service_type.label_tag }}
                    {{ form.service_type }}
                    {% if form.service_type.errors %}
                        <div>
                            {% for error in form.service_type.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div>
                    {{ form.appointment_date.label_tag }}
                    {{ form.appointment_date }}
                    {% if form.appointment_date.errors %}
                        <div>
                            {% for error in form.appointment_date.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div>
                    {{ form.preferred_contact.label_tag }}
                    {{ form.preferred_contact }}
                    {% if form.preferred_contact.errors %}
                        <div>
                            {% for error in form.preferred_contact.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div>
                    {{ form.booking_comments.label_tag }}
                    {{ form.booking_comments }}
                    {% if form.booking_comments.errors %}
                        <div>
                            {% for error in form.booking_comments.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div>
            <button type="submit">Create Booking</button>
        </div>
    </form>
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/service_booking_admin.js' %}"></script>
{% endblock %}